shell=$(basename "${SHELL}")

if command -v mise &> /dev/null; then
    if [[ -f "/opt/homebrew/bin/mise" ]] then
        eval "$(/opt/homebrew/bin/mise activate ${shell})"
        eval "$(/opt/homebrew/bin/mise completion ${shell})"
    else
        eval "$(mise activate ${shell})"
        eval "$(mise completion ${shell})"
    fi
fi

if command -v orb &> /dev/null; then
    source ~/.orbstack/shell/init.zsh 2>/dev/null || :
fi

if command -v starship &> /dev/null; then
    eval "$(starship init ${shell})"
fi

if command -v fzf &> /dev/null; then
    eval "$(fzf --${shell})"
fi

if command -v brew &> /dev/null; then
    if [[ -f "/opt/homebrew/bin/brew" ]] then
        # If you're using macOS, you'll want this enabled
        eval "$(/opt/homebrew/bin/brew shellenv)"
    fi
fi

if command -v jj &> /dev/null; then
    source <(jj util completion ${shell})
fi

if command -v ssh-agent &> /dev/null; then
    eval "$(ssh-agent -s &>/dev/null)"
fi

if command -v doppler &> /dev/null; then
    eval "$(doppler completion 2>/dev/null)"
fi

if command -v just &> /dev/null; then
    eval "$(just --completions ${shell})"
fi

if command -v opencode &> /dev/null; then
    eval "$(opencode completion 2>/dev/null)"
fi
